---
import RadarChartSVG from './RadarChartSVG.astro';
import { RM_PRACTICES, OTHER_PRACTICES } from '../../data/practices';

interface Props {
  figureNumber?: string;
  caption?: string;
}

const {
  figureNumber = '4.1',
  caption = 'Technologies of remembering compared across five dimensions. Choreo-musical practices (warm colors) produce full, round shapes. Specialized practices (cool colors) spike on one or two dimensions.',
} = Astro.props;
---

<figure class="radar-figure">
  <hr class="radar-rule" />

  <div class="radar-section-label radar-section-rm">Choreo-Musical Practices</div>
  <div class="radar-grid">
    {RM_PRACTICES.map(p => (
      <div class="radar-cell">
        <RadarChartSVG name={p.name} scores={p.scores} color={p.color} />
        <div class="radar-cell-name">{p.name}</div>
      </div>
    ))}
  </div>

  <div class="radar-section-label">Other Technologies of Remembering</div>
  <div class="radar-grid">
    {OTHER_PRACTICES.map(p => (
      <div class="radar-cell">
        <RadarChartSVG name={p.name} scores={p.scores} color={p.color} />
        <div class="radar-cell-name">{p.name}</div>
      </div>
    ))}
  </div>

  <figcaption class="radar-caption">
    <strong>Figure {figureNumber}.</strong> {caption}
  </figcaption>
</figure>

<style>
  .radar-figure {
    max-width: var(--content-wide, 900px);
    margin: var(--space-3xl, 6rem) auto;
  }

  .radar-rule {
    border: none;
    border-top: 1px solid var(--border-subtle, #2a2a2a);
    margin-bottom: var(--space-xl, 2.5rem);
  }

  .radar-rule::after {
    content: none;
  }

  .radar-section-label {
    font-family: var(--font-heading, sans-serif);
    font-size: 0.75rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.08em;
    color: var(--text-muted, #808080);
    margin-bottom: 1rem;
    padding-bottom: 0.5rem;
    border-bottom: 1px solid var(--border-subtle, #2a2a2a);
  }

  .radar-section-rm {
    color: var(--accent-gold, #D4A017);
    border-color: rgba(212, 160, 23, 0.3);
  }

  .radar-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(190px, 1fr));
    gap: 1.5rem;
    margin-bottom: 2.5rem;
  }

  .radar-cell {
    text-align: center;
  }

  .radar-cell-name {
    font-family: var(--font-heading, sans-serif);
    font-size: 0.8rem;
    font-weight: 600;
    color: var(--text-body, #c8c8c8);
    margin-top: 0.25rem;
  }

  .radar-caption {
    font-size: 0.8rem;
    color: var(--text-muted, #808080);
    line-height: 1.5;
    margin-top: var(--space-lg, 1.5rem);
  }

  .radar-caption strong {
    color: var(--text-body, #c8c8c8);
  }
</style>
